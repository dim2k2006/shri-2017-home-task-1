"use strict";window.addEventListener("load",function(){window.app.modules.main.init(),objectFitImages()}),function(){if(window.app||(window.app={}),"modules"in window.app||(window.app.modules={}),!("gallery"in app.modules)){var e=function(){var e=this;e.getOptions=function(){e.container=document.querySelector(".gallery"),e.modalOpen=app.modules.modal.route},e.setupListener=function(){e.container.addEventListener("click",e.handleClick)},e.handleClick=function(t){var n=t.target,o=n.closest(".gallery__link");if(t.preventDefault(),o){var i=JSON.parse(o.getAttribute("data-info"));e.modalOpen(i)}},e.init=function(){e.getOptions(),e.setupListener()}};window.app.modules.gallery=new e}}(),function(){if(window.app||(window.app={}),"modules"in window.app||(window.app.modules={}),!("main"in app.modules)){var e=function(){var e=this;e.getOptions=function(){e.html=document.querySelector("html"),e.body=document.querySelector("body"),e.modules=app.modules},e.initModules=function(){for(var t in e.modules)e.modules.hasOwnProperty(t)&&"undefined"!=typeof e.modules[t].init&&"main"!==t&&e.modules[t].init()},e.init=function(){e.getOptions(),e.initModules()}};window.app.modules.main=new e}}(),function(){if(window.app||(window.app={}),"modules"in window.app||(window.app.modules={}),!("modal"in app.modules)){var e=function(){var e=this;e.getOptions=function(){e.container=document.querySelector(".modal"),e.title=document.querySelector(".modal__title"),e.description=document.querySelector(".modal__description p"),e.img=document.querySelector(".modal__preview img"),e.closeBtn=document.querySelector(".modal__close"),e.delay={open:150,close:200}},e.setupListener=function(){e.closeBtn.addEventListener("click",e.close)},e.route=function(t){e.setup(t),e.open()},e.open=function(){e.container.classList.add("modal_state_open"),setTimeout(function(){return e.container.classList.add("modal_state_visible")},e.delay.open)},e.close=function(){e.container.classList.remove("modal_state_visible"),setTimeout(function(){e.container.classList.remove("modal_state_open"),e.reset()},e.delay.close)},e.setup=function(t){var n=t||{};n.title=n.title?n.title:"Заголовок изображения не найден",n.description=n.description?n.description:"Описание изображения не найдено.",n.source=n.source?n.source:"images/vis-error.jpg",e.title.textContent=n.title,e.description.textContent=n.description,e.img.src=n.source},e.reset=function(){e.title.textContent="",e.description.textContent="",e.img.src=""},e.init=function(){e.getOptions(),e.setupListener()}};window.app.modules.modal=new e}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4ubWluLmpzIiwibWFpbi5qcyIsImdhbGxlcnkvZ2FsbGVyeS5qcyIsIm1haW4vbWFpbi5qcyIsIm1vZGFsL21vZGFsLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJhcHAiLCJtb2R1bGVzIiwibWFpbiIsImluaXQiLCJvYmplY3RGaXRJbWFnZXMiLCJHYWxsZXJ5Iiwic2VsZiIsInRoaXMiLCJnZXRPcHRpb25zIiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibW9kYWxPcGVuIiwibW9kYWwiLCJyb3V0ZSIsInNldHVwTGlzdGVuZXIiLCJoYW5kbGVDbGljayIsImV2ZW50IiwidGFyZ2V0IiwibGluayIsImNsb3Nlc3QiLCJwcmV2ZW50RGVmYXVsdCIsImluZm8iLCJKU09OIiwicGFyc2UiLCJnZXRBdHRyaWJ1dGUiLCJnYWxsZXJ5IiwiTWFpbiIsImh0bWwiLCJib2R5IiwiaW5pdE1vZHVsZXMiLCJtb2R1bGUiLCJoYXNPd25Qcm9wZXJ0eSIsIk1vZGFsIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImltZyIsImNsb3NlQnRuIiwiZGVsYXkiLCJvcGVuIiwiY2xvc2UiLCJzZXR1cCIsImNsYXNzTGlzdCIsImFkZCIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJyZXNldCIsImRhdGEiLCJzb3VyY2UiLCJ0ZXh0Q29udGVudCIsInNyYyJdLCJtYXBwaW5ncyI6IkFBQUEsWUNHQUEsUUFBQUMsaUJBQUEsT0FBQSxXQUNBRCxPQUFBRSxJQUFBQyxRQUFBQyxLQUFBQyxPQUVBQyxvQkNOQSxXQVNBLEdBUkFOLE9BQUFFLE1BQ0FGLE9BQUFFLFFBR0EsV0FBQUYsUUFBQUUsTUFDQUYsT0FBQUUsSUFBQUMsY0FHQSxXQUFBRCxLQUFBQyxTQUFBLENBUUEsR0FBQUksR0FBQSxXQUNBLEdBQUFDLEdBQUFDLElBS0FELEdBQUFFLFdBQUEsV0FDQUYsRUFBQUcsVUFBQUMsU0FBQUMsY0FBQSxZQUNBTCxFQUFB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QWMsWUFBQSxHQUNBM0MsRUFBQThCLElBQUFjLElBQUEsSUFNQTVDLEVBQUFILEtBQUEsV0FDQUcsRUFBQUUsYUFDQUYsRUFBQVMsaUJBSUFqQixRQUFBRSxJQUFBQyxRQUFBWSxNQUFBLEdBQUFvQiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBJbml0IG1haW4gbW9kdWxlXG4gKi9cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy5hcHAubW9kdWxlcy5tYWluLmluaXQoKTtcblxuICAgIG9iamVjdEZpdEltYWdlcygpO1xufSk7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF3aW5kb3cuYXBwKSB7XG4gICAgICAgIHdpbmRvdy5hcHAgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoISgnbW9kdWxlcycgaW4gd2luZG93LmFwcCkpIHtcbiAgICAgICAgd2luZG93LmFwcC5tb2R1bGVzID0ge307XG4gICAgfVxuXG4gICAgaWYgKCdnYWxsZXJ5JyBpbiBhcHAubW9kdWxlcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBHYWxsZXJ5IGNsYXNzLlxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIHZhciBHYWxsZXJ5ID0gZnVuY3Rpb24gR2FsbGVyeSgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgb3B0aW9ucyBmb3IgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmdldE9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5Jyk7XG4gICAgICAgICAgICBzZWxmLm1vZGFsT3BlbiA9IGFwcC5tb2R1bGVzLm1vZGFsLnJvdXRlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgZXZlbnRzIGxpc3RlbmVyc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxmLmhhbmRsZUNsaWNrKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSGFuZGxlIGNsaWNrIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgIHZhciBsaW5rID0gdGFyZ2V0LmNsb3Nlc3QoJy5nYWxsZXJ5X19saW5rJyk7XG5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGlmICghbGluaykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGluZm8gPSBKU09OLnBhcnNlKGxpbmsuZ2V0QXR0cmlidXRlKCdkYXRhLWluZm8nKSk7XG5cbiAgICAgICAgICAgIHNlbGYubW9kYWxPcGVuKGluZm8pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0IG1vZHVsZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5nZXRPcHRpb25zKCk7XG4gICAgICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgd2luZG93LmFwcC5tb2R1bGVzLmdhbGxlcnkgPSBuZXcgR2FsbGVyeSgpO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXdpbmRvdy5hcHApIHtcbiAgICAgICAgd2luZG93LmFwcCA9IHt9O1xuICAgIH1cblxuICAgIGlmICghKCdtb2R1bGVzJyBpbiB3aW5kb3cuYXBwKSkge1xuICAgICAgICB3aW5kb3cuYXBwLm1vZHVsZXMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoJ21haW4nIGluIGFwcC5tb2R1bGVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE1haW4gY2xhc3MuXG4gICAgICogQGNsYXNzXG4gICAgICovXG4gICAgdmFyIE1haW4gPSBmdW5jdGlvbiBNYWluKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCBvcHRpb25zIGZvciBtb2R1bGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuaHRtbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKTtcbiAgICAgICAgICAgIHNlbGYuYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbiAgICAgICAgICAgIHNlbGYubW9kdWxlcyA9IGFwcC5tb2R1bGVzO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0IGFsbCBtb2R1bGVzIGluIGFwcC5tb2R1bGVzXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXRNb2R1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgbW9kdWxlIGluIHNlbGYubW9kdWxlcykge1xuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYubW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShtb2R1bGUpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxmLm1vZHVsZXNbbW9kdWxlXS5pbml0ICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUgIT09ICdtYWluJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1vZHVsZXNbbW9kdWxlXS5pbml0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgIHNlbGYuaW5pdE1vZHVsZXMoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgd2luZG93LmFwcC5tb2R1bGVzLm1haW4gPSBuZXcgTWFpbigpO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXdpbmRvdy5hcHApIHtcbiAgICAgICAgd2luZG93LmFwcCA9IHt9O1xuICAgIH1cblxuICAgIGlmICghKCdtb2R1bGVzJyBpbiB3aW5kb3cuYXBwKSkge1xuICAgICAgICB3aW5kb3cuYXBwLm1vZHVsZXMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoJ21vZGFsJyBpbiBhcHAubW9kdWxlcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBNb2RhbCBjbGFzcy5cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cbiAgICB2YXIgTW9kYWwgPSBmdW5jdGlvbiBNb2RhbCgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgb3B0aW9ucyBmb3IgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmdldE9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpO1xuICAgICAgICAgICAgc2VsZi50aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fdGl0bGUnKTtcbiAgICAgICAgICAgIHNlbGYuZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Rlc2NyaXB0aW9uIHAnKTtcbiAgICAgICAgICAgIHNlbGYuaW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19wcmV2aWV3IGltZycpO1xuICAgICAgICAgICAgc2VsZi5jbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2xvc2UnKTtcbiAgICAgICAgICAgIHNlbGYuZGVsYXkgPSB7IG9wZW46IDE1MCwgY2xvc2U6IDIwMCB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgZXZlbnRzIGxpc3RlbmVyc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGYuY2xvc2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXR1cCBhbmQgb3BlbiBtb2RhbCB3aW5kb3dcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGluZm9cbiAgICAgICAgICovXG4gICAgICAgIHNlbGYucm91dGUgPSBmdW5jdGlvbiAoaW5mbykge1xuICAgICAgICAgICAgc2VsZi5zZXR1cChpbmZvKTtcbiAgICAgICAgICAgIHNlbGYub3BlbigpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPcGVuIG1vZGFsIHdpbmRvd1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbW9kYWxfc3RhdGVfb3BlbicpO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ21vZGFsX3N0YXRlX3Zpc2libGUnKTtcbiAgICAgICAgICAgIH0sIHNlbGYuZGVsYXkub3Blbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsb3NlIG1vZGFsIHdpbmRvd1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX3N0YXRlX3Zpc2libGUnKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX3N0YXRlX29wZW4nKTtcblxuICAgICAgICAgICAgICAgIHNlbGYucmVzZXQoKTtcbiAgICAgICAgICAgIH0sIHNlbGYuZGVsYXkuY2xvc2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXR1cCBtb2RhbCBkYXRhXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbmZvXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnNldHVwID0gZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gaW5mbyB8fCB7fTtcblxuICAgICAgICAgICAgZGF0YS50aXRsZSA9IGRhdGEudGl0bGUgPyBkYXRhLnRpdGxlIDogJ9CX0LDQs9C+0LvQvtCy0L7QuiDQuNC30L7QsdGA0LDQttC10L3QuNGPINC90LUg0L3QsNC50LTQtdC9JztcbiAgICAgICAgICAgIGRhdGEuZGVzY3JpcHRpb24gPSBkYXRhLmRlc2NyaXB0aW9uID8gZGF0YS5kZXNjcmlwdGlvbiA6ICfQntC/0LjRgdCw0L3QuNC1INC40LfQvtCx0YDQsNC20LXQvdC40Y8g0L3QtSDQvdCw0LnQtNC10L3Qvi4nO1xuICAgICAgICAgICAgZGF0YS5zb3VyY2UgPSBkYXRhLnNvdXJjZSA/IGRhdGEuc291cmNlIDogJ2ltYWdlcy92aXMtZXJyb3IuanBnJztcblxuICAgICAgICAgICAgc2VsZi50aXRsZS50ZXh0Q29udGVudCA9IGRhdGEudGl0bGU7XG4gICAgICAgICAgICBzZWxmLmRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIHNlbGYuaW1nLnNyYyA9IGRhdGEuc291cmNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXNldCBtb2RhbCBkYXRhXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi50aXRsZS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgc2VsZi5kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgc2VsZi5pbWcuc3JjID0gJyc7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICB3aW5kb3cuYXBwLm1vZHVsZXMubW9kYWwgPSBuZXcgTW9kYWwoKTtcbn0pKCk7IiwiLyoqXG4gKiBJbml0IG1haW4gbW9kdWxlXG4gKi9cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICAgIHdpbmRvdy5hcHAubW9kdWxlcy5tYWluLmluaXQoKTtcblxuICAgIG9iamVjdEZpdEltYWdlcygpO1xufSk7XG4iLCIoKCkgPT4ge1xuICAgIGlmICghd2luZG93LmFwcCkge1xuICAgICAgICB3aW5kb3cuYXBwID0ge307XG4gICAgfVxuXG4gICAgaWYgKCEoJ21vZHVsZXMnIGluIHdpbmRvdy5hcHApKSB7XG4gICAgICAgIHdpbmRvdy5hcHAubW9kdWxlcyA9IHt9O1xuICAgIH1cblxuICAgIGlmICgnZ2FsbGVyeScgaW4gYXBwLm1vZHVsZXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgR2FsbGVyeSBjbGFzcy5cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cbiAgICBjb25zdCBHYWxsZXJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgb3B0aW9ucyBmb3IgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmdldE9wdGlvbnMgPSAoKSA9PiB7XG4gICAgICAgICAgICBzZWxmLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5Jyk7XG4gICAgICAgICAgICBzZWxmLm1vZGFsT3BlbiA9IGFwcC5tb2R1bGVzLm1vZGFsLnJvdXRlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgZXZlbnRzIGxpc3RlbmVyc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgc2VsZi5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxmLmhhbmRsZUNsaWNrKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSGFuZGxlIGNsaWNrIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5oYW5kbGVDbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICBjb25zdCBsaW5rID0gdGFyZ2V0LmNsb3Nlc3QoJy5nYWxsZXJ5X19saW5rJyk7XG5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGlmICghbGluaykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaW5mbyA9IEpTT04ucGFyc2UobGluay5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5mbycpKTtcblxuICAgICAgICAgICAgc2VsZi5tb2RhbE9wZW4oaW5mbyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXQgPSAoKSA9PiB7XG4gICAgICAgICAgICBzZWxmLmdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICB3aW5kb3cuYXBwLm1vZHVsZXMuZ2FsbGVyeSA9IG5ldyBHYWxsZXJ5KCk7XG59KSgpO1xuIiwiKCgpID0+IHtcbiAgICBpZiAoIXdpbmRvdy5hcHApIHtcbiAgICAgICAgd2luZG93LmFwcCA9IHt9O1xuICAgIH1cblxuICAgIGlmICghKCdtb2R1bGVzJyBpbiB3aW5kb3cuYXBwKSkge1xuICAgICAgICB3aW5kb3cuYXBwLm1vZHVsZXMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoJ21haW4nIGluIGFwcC5tb2R1bGVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE1haW4gY2xhc3MuXG4gICAgICogQGNsYXNzXG4gICAgICovXG4gICAgY29uc3QgTWFpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IG9wdGlvbnMgZm9yIG1vZHVsZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5nZXRPcHRpb25zID0gKCkgPT4ge1xuICAgICAgICAgICAgc2VsZi5odG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpO1xuICAgICAgICAgICAgc2VsZi5ib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICAgICAgICAgICAgc2VsZi5tb2R1bGVzID0gYXBwLm1vZHVsZXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgYWxsIG1vZHVsZXMgaW4gYXBwLm1vZHVsZXNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW5pdE1vZHVsZXMgPSAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBtb2R1bGUgaW4gc2VsZi5tb2R1bGVzKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5tb2R1bGVzLmhhc093blByb3BlcnR5KG1vZHVsZSkpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNlbGYubW9kdWxlc1ttb2R1bGVdLmluaXQgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZSAhPT0gJ21haW4nKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubW9kdWxlc1ttb2R1bGVdLmluaXQoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdCBtb2R1bGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW5pdCA9ICgpID0+IHtcbiAgICAgICAgICAgIHNlbGYuZ2V0T3B0aW9ucygpO1xuICAgICAgICAgICAgc2VsZi5pbml0TW9kdWxlcygpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICB3aW5kb3cuYXBwLm1vZHVsZXMubWFpbiA9IG5ldyBNYWluKCk7XG59KSgpO1xuIiwiKCgpID0+IHtcbiAgICBpZiAoIXdpbmRvdy5hcHApIHtcbiAgICAgICAgd2luZG93LmFwcCA9IHt9O1xuICAgIH1cblxuICAgIGlmICghKCdtb2R1bGVzJyBpbiB3aW5kb3cuYXBwKSkge1xuICAgICAgICB3aW5kb3cuYXBwLm1vZHVsZXMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoJ21vZGFsJyBpbiBhcHAubW9kdWxlcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBNb2RhbCBjbGFzcy5cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cbiAgICBjb25zdCBNb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IG9wdGlvbnMgZm9yIG1vZHVsZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5nZXRPcHRpb25zID0gKCkgPT4ge1xuICAgICAgICAgICAgc2VsZi5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKTtcbiAgICAgICAgICAgIHNlbGYudGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3RpdGxlJyk7XG4gICAgICAgICAgICBzZWxmLmRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19kZXNjcmlwdGlvbiBwJyk7XG4gICAgICAgICAgICBzZWxmLmltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fcHJldmlldyBpbWcnKTtcbiAgICAgICAgICAgIHNlbGYuY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlJyk7XG4gICAgICAgICAgICBzZWxmLmRlbGF5ID0ge29wZW46IDE1MCwgY2xvc2U6IDIwMH07XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBldmVudHMgbGlzdGVuZXJzXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBzZWxmLmNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZi5jbG9zZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHVwIGFuZCBvcGVuIG1vZGFsIHdpbmRvd1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5mb1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5yb3V0ZSA9IChpbmZvKSA9PiB7XG4gICAgICAgICAgICBzZWxmLnNldHVwKGluZm8pO1xuICAgICAgICAgICAgc2VsZi5vcGVuKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9wZW4gbW9kYWwgd2luZG93XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICBzZWxmLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtb2RhbF9zdGF0ZV9vcGVuJyk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNlbGYuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ21vZGFsX3N0YXRlX3Zpc2libGUnKSwgc2VsZi5kZWxheS5vcGVuKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xvc2UgbW9kYWwgd2luZG93XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgc2VsZi5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfc3RhdGVfdmlzaWJsZScpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VsZi5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfc3RhdGVfb3BlbicpO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5yZXNldCgpO1xuICAgICAgICAgICAgfSwgc2VsZi5kZWxheS5jbG9zZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHVwIG1vZGFsIGRhdGFcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGluZm9cbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0dXAgPSAoaW5mbykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGluZm8gfHwge307XG5cbiAgICAgICAgICAgIGRhdGEudGl0bGUgPSBkYXRhLnRpdGxlID8gZGF0YS50aXRsZSA6ICfQl9Cw0LPQvtC70L7QstC+0Log0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQvdC1INC90LDQudC00LXQvSc7XG4gICAgICAgICAgICBkYXRhLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbiA/IGRhdGEuZGVzY3JpcHRpb24gOiAn0J7Qv9C40YHQsNC90LjQtSDQuNC30L7QsdGA0LDQttC10L3QuNGPINC90LUg0L3QsNC50LTQtdC90L4uJztcbiAgICAgICAgICAgIGRhdGEuc291cmNlID0gZGF0YS5zb3VyY2UgPyBkYXRhLnNvdXJjZSA6ICdpbWFnZXMvdmlzLWVycm9yLmpwZyc7XG5cbiAgICAgICAgICAgIHNlbGYudGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLnRpdGxlO1xuICAgICAgICAgICAgc2VsZi5kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEuZGVzY3JpcHRpb247XG4gICAgICAgICAgICBzZWxmLmltZy5zcmMgPSBkYXRhLnNvdXJjZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVzZXQgbW9kYWwgZGF0YVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5yZXNldCA9ICgpID0+IHtcbiAgICAgICAgICAgIHNlbGYudGl0bGUudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgICAgIHNlbGYuZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgICAgIHNlbGYuaW1nLnNyYyA9ICcnO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0IG1vZHVsZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbml0ID0gKCkgPT4ge1xuICAgICAgICAgICAgc2VsZi5nZXRPcHRpb25zKCk7XG4gICAgICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgd2luZG93LmFwcC5tb2R1bGVzLm1vZGFsID0gbmV3IE1vZGFsKCk7XG59KSgpO1xuIl19
